<h1>My missions:</h1>

<table>
  <tr>
    <th></th>
    <th>Name</th>
    <th>Blurb</th>
    <th></th>
    <th></th>
  </tr>

<%# Want to list my missions, my collaboration missions, first 10 public missions %>
<%# later want activity page showing recent updates since my last visit %>
<%# So, lets get an array of all those missions from the index controller... %>
<% @missions.each do |mission| %>
  <tr>
    <% @collaborator = Collaborator.where( :mission_id => mission.id, :user_id => current_user.id ) %>
    <td><%= @collaborator.first.permission %></td>
    <td><%= link_to 'plan...', mission %> | </td>
    <td><%= mission.name[0..30] %></td>
    <td>  |  <%= mission.blurb[0..60] %></td>
    <% if @collaborator.first.permission == 'creator' || @collaborator.first.permission == 'admin' then   %>
       <td>&nbsp &nbsp...<%= link_to 'Edit', edit_mission_path(mission) %> | </td>
       <td><%= link_to 'Destroy', mission, method: :delete, data: { confirm: 'All mission data will be permantently deleted. Are you sure?' } %></td>
    <% end %>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Mission', new_mission_path %>
